<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="./css/bootstrap.css">
  <!-- loading-bar.css -->
  <link rel="stylesheet" href="./css/loading-bar.css">
  <title>loading-bar</title>
  <style>
    /* loading bar 容器 */
    .ldBar {
      width: 300px !important;
      height: 300px !important;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    /* loading bar 百分比文字 */
    .ldBar-label {
      color: blue;
      font-size: 2rem;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: none;
    }

    /* bar 百分比單位，預設 % */
    .ldBar-label::after {
      content: '%';
      font-size: 1.5rem;
    }
  </style>
</head>

<body>
  <div id="loadingBar" class="ldBar"></div>
  <img src="https://picsum.photos/1920/1080/?random=1">
  <img src="https://picsum.photos/1920/1080/?random=2">
  <img src="https://picsum.photos/1920/1080/?random=3">
  <img src="https://picsum.photos/1920/1080/?random=4">

  <script src="./js/jquery-3.5.1.min.js"></script>
  <script src="./js/popper.min.js"></script>
  <script src="./js/bootstrap.min.js"></script>
  <script src="./js/loading-bar.js"></script>
  <script>
    let loadingBar = new ldBar("#loadingBar", {
      // 值得設定 ------------------------------------------------------------------
      "value": 0, // 目前值
      'min': 0, // 最小值
      'max': 100, // 最大值
      // 'precision': '0.00001', // 精確浮點數，小數點幾位數
      // 'duration': 1,

      // 使用套件圖形設定 ----------------------------------------------------------
      // 'preset': 'energy', // 形狀,circle、fan、bubble、line、stripe、energy、rainbow
      // "stroke": 'yellow', // 不支援 rgba()，其他支援
      // "stroke-width": 2, // 粗細
      // 'stroke-lincap': 'round',

      // 使用自訂義圖片 ------------------------------------------------------------
      'img': './images/pica.png',
      'img-size': '120,120',
      'type': 'fill',
      'fill-dir': 'btt', // loading 方向，ltr、rtl、btt、ttb
      'fill-background': '#333', // 背景填滿顏色
      'fill-background-extrude': 1, // 背景填滿區域大小,0跟圖片一樣大
    });

    let loadingTxt = 0;
    $('img').css({ display: 'none' })
    $(window).on('load', function () {
      let timer = setInterval(() => {
        loadingBar.set(loadingTxt)
        if (loadingTxt >= 100) {
          $('img').fadeIn();
          $('#loadingBar').fadeOut();
        } else {
          loadingTxt++
        }
      }, 30);
    })
  </script>
</body>

</html>